https://www.cnblogs.com/gaokeji/p/16375323.html
一、事务的执行流程


当我们对数据库执行增删改操作时，不可能直接更新磁盘上的数据，如果实际上针对的是内存里面的Buffer Pool中的数据进行的。

Buffer Pool中数据会异步的刷新到磁盘上（刷脏）。

如上图所示，事务执行流程步骤（更新操作）：
    1. 查询数据若Buffer Pool存在，则输出，不存在则读取磁盘中的数据并放入Buffer Pool；
    2. 更新操作，会先将数据的旧值写入undo log，以便回滚。（保证原子性）；
    3. 更新Buffer Pool（内存）数据；
    4. 将更新数据写入到Redo Log Buffer（内存中）；
    5. 准备提交事务，会调用fsync将Redo Log Buffer的值刷入到redo log日志文件中，状态为prepare；
    6. 准备提交事务，binlog 日志写入磁盘；
    7. binlog写入成功后，将redo log的状态变更为commit；